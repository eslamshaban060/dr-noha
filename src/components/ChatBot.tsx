import { useState, useRef, useEffect } from "react";
import { MessageCircle, X, Send, Bot, User, Facebook, Phone, Calendar } from "lucide-react";
import { Button } from "@/components/ui/button";
import { Input } from "@/components/ui/input";

interface Message {
  id: number;
  text: string;
  isBot: boolean;
  timestamp: Date;
  buttons?: { label: string; url?: string; action?: string }[];
}

// Dynamic quick replies that rotate
const allQuickReplies = [
  "ูุง ูู ุฎุฏูุงุช ุงูุนูุงุฏุฉุ",
  "ุฃูู ุงูุนูุงูููุ",
  "ููู ุฃุญุฌุฒ ููุนุฏุ",
  "ูุตุงุฆุญ ูุตุญุฉ ุงูููู",
  "ูุง ูู ุงููุฑูุงุชููููุ",
  "ุญุตูุงุช ุงูููู",
  "ุงูููู ูุงูุญูู",
  "ุงููุณููุงุช ูุงูููู",
  "ุตูุญุฉ ุงูููุณ ุจูู",
];

const getRandomQuickReplies = () => {
  const shuffled = [...allQuickReplies].sort(() => 0.5 - Math.random());
  return shuffled.slice(0, 3);
};

// Greetings and casual responses
const greetings: Record<string, string> = {
  "ุงูุณูุงู ุนูููู": "ูุนูููู ุงูุณูุงู ูุฑุญูุฉ ุงููู ูุจุฑูุงุชู! ๐ ุฃููุงู ุจู ูู ุนูุงุฏุฉ ุฏ. ููู ุฌูุงู. ููู ูููููู ูุณุงุนุฏุชู ุงููููุ",
  "ุณูุงู": "ูุนูููู ุงูุณูุงู! ๐ ุฃููุงู ุจู. ููู ูููููู ูุณุงุนุฏุชูุ",
  "ูุฑุญุจุง": "ุฃููุงู ูุณููุงู ุจู! ๐ ููู ูููููู ูุณุงุนุฏุชู ุงููููุ",
  "ุงููุง": "ุฃููุงู ุจู! ๐ ููู ุฃูุฏุฑ ุฃุณุงุนุฏูุ",
  "ูุงู": "ุฃููุงู! ๐ ููู ุฃูุฏุฑ ุฃุฎุฏููุ",
  "ููู": "ูุฑุญุจุงู! ๐ ูู ุฎุฏูุชู.",
  "ุตุจุงุญ ุงูุฎูุฑ": "ุตุจุงุญ ุงูููุฑ! ๐ ููู ูููููู ูุณุงุนุฏุชูุ",
  "ูุณุงุก ุงูุฎูุฑ": "ูุณุงุก ุงูููุฑ! ๐ ููู ูููููู ูุณุงุนุฏุชูุ",
  "ุนุงูู ุงูู": "ุงูุญูุฏ ููู ุจุฎูุฑ! ๐ ุดูุฑุงู ูุณุคุงูู. ููู ูููููู ูุณุงุนุฏุชูุ",
  "ุงุฒูู": "ุงูุญูุฏ ููู ุชูุงู! ๐ ุดูุฑุงู ูุณุคุงูู. ุฅุฒู ุฃูุฏุฑ ุฃุณุงุนุฏูุ",
  "ุงูู ุงูุงุฎุจุงุฑ": "ุงูุญูุฏ ูููุ ูู ุงูุชูุงู! ๐ ููู ุฃูุฏุฑ ุฃุฎุฏูู ุงูููุงุฑุฏุฉุ",
  "ูููู": "ุงูุญูุฏ ููู ุจุฎูุฑ! ๐ ุดูุฑุงู. ููู ุฃูุฏุฑ ุฃุณุงุนุฏูุ",
};

// Site-related questions
const siteQuestions: Record<string, { text: string; buttons?: { label: string; url?: string; action?: string }[] }> = {
  "ูููุน ููู": {
    text: `ูุฐุง ุงููููุน ุงูุฑุณูู ูู ุฏ. ููู ุฌูุงู ุนุจุฏุงููุงูู ๐

๐ฉโโ๏ธ ุงุณุชุดุงุฑู ุฃูุฑุงุถ ุงูููู ูุงูุจุงุทูุฉ
๐ ูุงุฌุณุชูุฑ ุฃูุฑุงุถ ุงูููู - ุฌุงูุนุฉ ุฃุณููุท

ุงููููุน ูููุฑ ูู:
โข ูุนูููุงุช ุนู ุฎุฏูุงุช ุงูุนูุงุฏุฉ
โข ุญุฌุฒ ุงูููุงุนูุฏ
โข ูุตุงุฆุญ ุทุจูุฉ ูุตุญุฉ ุงูููู
โข ุงูุชูุงุตู ุงููุจุงุดุฑ`,
  },
  "ููู ุนูู ุงููููุน": {
    text: `ุชู ุชุตููู ูุชุทููุฑ ูุฐุง ุงููููุน ุจูุงุณุทุฉ ุดุฑูุฉ Good Graphic ๐

๐จ ููุฏู ุฎุฏูุงุช:
โข ุชุตููู ูุชุทููุฑ ุงูููุงูุน
โข ุฅุฏุงุฑุฉ ุงูุณูุดูุงู ููุฏูุง ูููุทุงุน ุงูุทุจู
โข ุฎุฏูุงุช ุงูุฏุนุงูุฉ ูุงูุชุณููู ุงูุทุจู

๐จโ๐ป ุชุญุช ุฅุดุฑุงู: ู. ุฅุณูุงู ุดุนุจุงู`,
    buttons: [
      { label: "๐ฑ ุชูุงุตู ุนุจุฑ ูุงุชุณุงุจ", url: "https://wa.me/201145570733" },
    ],
  },
  "ุนุงูุฒ ุงุญุฌุฒ": {
    text: `ููููู ุญุฌุฒ ููุนุฏู ุจุณูููุฉ! ๐

ููุญุฌุฒ ุงูุณุฑูุน:`,
    buttons: [
      { label: "๐ ุงุญุฌุฒ ููุนุฏู ุงูุขู", action: "booking" },
      { label: "๐ ุงุชุตู ููุญุฌุฒ", url: "tel:01029665927" },
    ],
  },
};

const botResponses: Record<string, string> = {
  "ูุง ูู ุฎุฏูุงุช ุงูุนูุงุฏุฉ": `ุชูุฏู ุฏ. ููู ุฌูุงู ุฎุฏูุงุช ูุชููุฒุฉ ุชุดูู:
  
๐น ุชุดุฎูุต ูุนูุงุฌ ุงููุตูุฑ ุงููููู ุงูุญุงุฏ ูุงููุฒูู
๐น ูุชุงุจุนุฉ ุญุงูุงุช ุฒุฑุงุนุฉ ุงูููู ูุงูุบุณูู ุงููููู
๐น ุนูุงุฌ ุงูุงูุชูุงุจ ุงูููุฑูุฒู ูุงููุดู ุงููููู
๐น ุฃุฎุฐ ุนููุงุช ุงูุจุฐู ุงููููู
๐น ุชุฑููุจ ุงููุณุทุฑุฉ ุงููุฑูุฏูุฉ ููุบุณูู ุงููููู
๐น ูุชุงุจุนุฉ ูุฑุถู ุงูุถุบุท ูุงูุณูุฑ
๐น ุนูุงุฌ ุฃูุฑุงุถ ุงูููุงุนุฉ ุงููุชุนููุฉ ุจุงูููู (ุงูุฐุฆุจุฉ ุงูุญูุฑุงุก ูุงูุฑููุงุชููุฏ)`,

  "ุฃูู ุงูุนูุงููู": `๐ ุงูุนูุงุฏุงุช:

๐ฅ ุนูุงุฏุฉ ุฃุณููุท:
ุนูุงุฑุงุช ุงูุฃููุงู - ุนูุงุฑุฉ ุฑูู 4 - ุงูุฏูุฑ ุงูุซุงูุซ

๐ฅ ุนูุงุฏุฉ ูููู:
14 ุดุงุฑุน ุงูุนุฑูุงูู - ุฃูุงู ุงูุซุงูููุฉ ุจูุงุช

๐ ููุญุฌุฒ: 01029665927`,

  "ููู ุฃุญุฌุฒ ููุนุฏ": `ููููู ุญุฌุฒ ููุนุฏู ุจุณูููุฉ ุนู ุทุฑูู:

1๏ธโฃ ุงูุงุชุตุงู ุนูู: 01029665927
2๏ธโฃ ุฅุฑุณุงู ุฑุณุงูุฉ ูุงุชุณุงุจ
3๏ธโฃ ููุก ูููุฐุฌ ุงูุญุฌุฒ ูู ุงููููุน

ุณูุชูุงุตู ูุนู ูุชุฃููุฏ ููุนุฏู ูู ุฃูุฑุจ ููุช ๐`,

  "ูุง ูู ููุงุนูุฏ ุงูุนูู": `๐ ููุงุนูุฏ ุงูุนูู:

ุนูุงุฏุฉ ุฃุณููุท: ููููุงู ูู 5 ูุณุงุกู ุฅูู 9 ูุณุงุกู
ุนูุงุฏุฉ ูููู: ุงูุฎููุณ ูุงูุฌูุนุฉ ูู 10 ุตุจุงุญุงู ุฅูู 2 ูุณุงุกู

ููุชุฃูุฏ ูู ุงูููุงุนูุฏุ ูุฑุฌู ุงูุงุชุตุงู ุนูู: 01029665927`,

  "ูุตุงุฆุญ ูุตุญุฉ ุงูููู": `๐ก ูุตุงุฆุญ ูููุฉ ููุญูุงุธ ุนูู ุตุญุฉ ุงูููู:

๐ง ุดุฑุจ 8-10 ุฃููุงุจ ูุงุก ููููุงู (ุญุชู ูู ุงูุดุชุงุก!)
๐ ุชูุงูู ุบุฐุงุก ุตุญู ูุชูุงุฒู ูููู ุงูููุญ
๐ซ ุชุฌูุจ ุงูุฅูุฑุงุท ูู ุงูุจุฑูุชููุงุช
๐ ููุงุฑุณุฉ ุงูุฑูุงุถุฉ ุจุงูุชุธุงู
๐ ุนุฏู ุงูุฅูุฑุงุท ูู ุงููุณููุงุช
๐ฅ ุงููุญุต ุงูุฏูุฑู ุฎุงุตุฉ ููุฑุถู ุงูุณูุฑ ูุงูุถุบุท
๐ญ ุงูุฅููุงุน ุนู ุงูุชุฏุฎูู
โ๏ธ ุงูุญูุงุธ ุนูู ูุฒู ุตุญู

โ๏ธ ููู ุฌุฏุงู ูู ุงูุดุชุง:
ุงูุฌู ุงูุจุงุฑุฏ ุจูุฎููู ุฅุญุณุงุณู ุจุงูุนุทุด ูููุ ููู ุฌุณูู ูุณู ูุญุชุงุฌ ููุณ ูููุฉ ุงูููุฉ!
ุฑุงูุจ ููู ุงูุจูู: ูุงุชุญ = ุชูุงู โุ ุบุงูู = ูุญุชุงุฌ ุชุดุฑุจ ุฃูุชุฑ โ๏ธ

ูููุฒูุฏ ูู ุงููุตุงุฆุญุ ุงุญุฌุฒู ุงุณุชุดุงุฑุชู ูุน ุฏ. ููู ๐`,

  "ูุง ูู ุงููุฑูุงุชูููู": `๐ฌ ุงููุฑูุงุชูููู (Creatinine):

ูู ูุงุฏุฉ ูุงุชุฌุฉ ุนู ุชูุณูุฑ ุงูุนุถูุงุชุ ุชุชุฎูุต ูููุง ุงูููู ุนุจุฑ ุงูุจูู.

๐ ุงููุนุฏู ุงูุทุจูุนู:
โข ุงูุฑุฌุงู: 0.7 - 1.3 mg/dL
โข ุงููุณุงุก: 0.6 - 1.1 mg/dL

โ๏ธ ุงุฑุชูุงุน ุงููุฑูุงุชูููู ูุดูุฑ ุฅูู:
โข ุถุนู ูุธุงุฆู ุงูููู
โข ุงูุฌูุงู
โข ูุดุงูู ูู ุงููุณุงูู ุงูุจูููุฉ

โ ุฅุฐุง ูุงู ุงููุฑูุงุชูููู ูุฑุชูุนุ ููุตุญ ุจู:
โข ุดุฑุจ ุงููุฒูุฏ ูู ุงููุงุก
โข ุชูููู ุงูุจุฑูุชููุงุช
โข ุฒูุงุฑุฉ ุทุจูุจ ุงูููู ูููุญุต

โ๏ธ ููุงุทูุฆูุงูุ ุงุญุฌุฒ ููุนุฏ ูุน ุฏ. ููู`,

  "ุชุญุงููู ูุธุงุฆู ุงูููู": `๐ฌ ุชุญุงููู ูุธุงุฆู ุงูููู ุงูุฃุณุงุณูุฉ:

1๏ธโฃ ุงููุฑูุงุชูููู (Creatinine):
โข ุงูุทุจูุนู: 0.6 - 1.3 mg/dL
โข ูููุณ ูุฏุฑุฉ ุงูููู ุนูู ุงูุชุฑุดูุญ

2๏ธโฃ ุงูููุฑูุง (BUN):
โข ุงูุทุจูุนู: 7 - 20 mg/dL
โข ุชุนูุณ ูุธููุฉ ุงูููู ูุงูุชุบุฐูุฉ

3๏ธโฃ ูุนุฏู ุงูุชุฑุดูุญ ุงููููู (eGFR):
โข ุงูุทุจูุนู: ุฃูุซุฑ ูู 90 mL/min
โข 60-89: ุงูุฎูุงุถ ุทููู
โข 30-59: ุงูุฎูุงุถ ูุชูุณุท
โข 15-29: ุงูุฎูุงุถ ุดุฏูุฏ
โข ุฃูู ูู 15: ูุดู ูููู

4๏ธโฃ ุญูุถ ุงูููุฑูู (Uric Acid):
โข ุงูุทุจูุนู: 3.5 - 7.2 mg/dL

5๏ธโฃ ุชุญููู ุงูุจูู:
โข ูููุดู ุนู ุงูุจุฑูุชูู ูุงูุฏู

๐ ููุชูุณูุฑ ุงูุตุญูุญ ููุชุญุงูููุ ุชูุงุตู ูุน ุฏ. ููู`,

  "ุญุตูุงุช ุงูููู": `๐ฌ ุญุตูุงุช ุงูููู:

ูู ุชุฌูุนุงุช ุตูุจุฉ ูู ุงูุฃููุงุญ ูุงููุนุงุฏู ูู ุงูููู.

๐ ุงูุฃููุงุน:
โข ุญุตูุงุช ุงููุงูุณููู (ุงูุฃูุซุฑ ุดููุนุงู)
โข ุญุตูุงุช ุญูุถ ุงูููุฑูู
โข ุญุตูุงุช ุงูุณุชุฑููุงูุช
โข ุญุตูุงุช ุงูุณูุณุชูู

๐จ ุงูุฃุนุฑุงุถ:
โข ุฃูู ุดุฏูุฏ ูู ุงูุฌุงูุจ ุฃู ุงูุธูุฑ
โข ุงูุฃูู ูููู ููู ุนูู ุงูุจุทู ุฃู ุงููุฎุฐ
โข ุฏู ูู ุงูุจูู
โข ุบุซูุงู ูููุก
โข ุญุฑูุงู ุนูุฏ ุงูุชุจูู

โ๏ธ ููู ุงูุญุตูุงุช ูููู ุชุชูุฑุฑ ุจุนุฏ ุงูุนูููุฉุ
โข ููุฉ ุดุฑุจ ุงูููุฉ
โข ุฃูู ูููุงู ููุญ ูุจุฑูุชูู
โข ูุดุฑูุจุงุช ุบุงุฒูุฉ ุจูุชุฑู
โข ุฅููุงู ุงููุชุงุจุนุฉ ุจุนุฏ ุงูุนูููุฉ
โข ุงุณุชุนุฏุงุฏ ูุฑุงุซู

โ ุงูููุงูุฉ:
๐ง ุดุฑุจ 2-3 ูุชุฑ ูุงุก ููููุงู
๐ ุชูุงูู ุงูุญูุถูุงุช
๐ซ ุชูููู ุงูููุญ ูุงูุฃููุงุช ุงูุฌุงูุฒุฉ
โ๏ธ ุงูุญูุงุธ ุนูู ูุฒู ุตุญู
๐ฅ ูุชุงุจุนุฉ ุฏูุฑูุฉ ูุน ุทุจูุจ ุงูููู

โ๏ธ ุงูุนูููุฉ ุดุงูุช ุงูุญุตูุฉ ููู ูุง ุดุงูุชุด ุงูุณุจุจ!
ุงูููุงูุฉ ุจุนุฏ ุงูุนูููุฉ ูู ุงููู ุจุชุญุงูุธ ุนูู ูููุชู ๐`,

  "ุงูููู ูุงูุญูู": `๐ฌ ุงูููู ูุงูุญููโฆ ุนูุงูุฉ ูุญุชุงุฌุฉ ูุนู!

ุงูุญูู ุจูุบููุฑ ูู ุญุงุฌุฉ ูู ุฌุณูู:
โข ุงูุฌุณู ุจูุฒููุฏ ูููุฉ ุงูุฏู
โข ุงูููู ุจุชุดุชุบู ุถุนู ุดุบููุง ุชูุฑูุจุงู
โข ุฃู ูุดููุฉ ุจุณูุทุฉ ูุงูุช ุณุงูุชุฉ ูุจู ุงูุญูู ูููู ุชุธูุฑ

โ๏ธ ุฅูู ุงููู ูููู ูุญุตู ูู ุบูุฑ ุฃุนุฑุงุถุ
โข ุงูุชูุงุจุงุช ุจูู ูู ุบูุฑ ุญุฑูุงู
โข ุงุฑุชูุงุน ุถุบุท ุงูุญูู
โข ุธููุฑ ุฒูุงู ูู ุงูุจูู
โข ุฅุฌูุงุฏ ุนูู ุงูููู ูู ุบูุฑ ุฃูู ูุงุถุญ

โ๏ธ ูุชูุฑ ูู ุงูุฃุนุฑุงุถ ุฏู ุจุชุชุดุงุจู ูุน ุฃุนุฑุงุถ ุงูุญูู ุงูุทุจูุนูุฉ!

โ ููู ุงููุชุงุจุนุฉ ูููุฉุ
โข ุญูู ุฃูุซุฑ ุฃูุงูุงู
โข ุญูุงูุฉ ููุฃู
โข ููู ุณููู ููุฌููู
โข ุชูููู ูุถุงุนูุงุช ูุจู ุงูููุงุฏุฉ

โ๏ธ ูุน ุฏ. ูููู ุฌูุงู
ูุนูู ุฃุซูุงุก ุงูุญููโฆ ุฃูุงู ูููู ููุทููู ๐`,

  "ุงููุณููุงุช ูุงูููู": `๐ฌ ุงููุณููุงุชโฆ ุฑุงุญุฉ ุณุฑูุนุฉ ููุง ุฎุทุฑ ุตุงูุช ุนูู ุงููููุ

ุงูุตุฏุงุนุ ูุฌุน ุงูุถูุฑุ ุขูุงู ุงูุนุถูโฆ ูุฃุจุณุท ุญู: ูุณูู ูู ุงูุตูุฏููุฉ!

โ๏ธ ููู ุงูุงุณุชุฎุฏุงู ุงููุชูุฑุฑ ูููุณููุงุช ูู ุฃุฎุทุฑ ุฃุณุจุงุจ ุชุฏููุฑ ุงูููู!

โ ููู ุงููุณููุงุช ุฎุทุฑุ
ุงููุณููุงุช (ุฎุตูุตูุง ูุถุงุฏุงุช ุงูุงูุชูุงุจ ุฒู ุงูุจุฑูููู ูุงููููุชุงุฑูู) ุจุชุฃุซุฑ ุนูู ุชุฏูู ุงูุฏู ููููู ููุน ุงูููุช ุชุณุจุจ:
โข ุถุนู ูู ูุธุงุฆู ุงูููู
โข ูููู ุชูุตู ููุดู ูููู

โ๏ธ ุฎุทูุฑุชูุง ุจุชุฒูุฏ ุนูุฏ:
โข ูุฑุถู ุงูุถุบุท ูุงูุณูุฑ
โข ูุจุงุฑ ุงูุณู
โข ุงููู ุจูุงุฎุฏูุง ุฃูุชุฑ ูู ุฏูุงุก ุจุงูุชุธุงู

โ ุงูุญู:
โข ูุง ุชุงุฎุฏุด ุฃู ูุณูู ูู ุบูุฑ ุงุณุชุดุงุฑุฉ ุทุจูุจ
โข ุฎุงุตุฉ ูู ูุฑูุถ ุณูุฑ ุฃู ุถุบุท
โข ุชุฌูุจ ุงูุฅูุฑุงุท ูู ุฃุฏููุฉ ุงูุจุฑุฏ ููุงู!

โ๏ธ ูุน ุฏ. ููู ุฌูุงู - ุฎููู ูุงุนูโฆ ุฎุทูุฉ ุตุบูุฑุฉ ูููู ุชุญูู ูููุชู ๐`,

  "ุฃุฏููุฉ ุงูุถุบุท": `๐ฌ ุฃุฏููุฉ ุงูุถุบุท ูุงูููู:

ุฃุฏููุฉ ุงูุถุบุท ุณูุงุญ ุฐู ุญุฏูู! ูุด ูู ุฏูุงุก ุถุบุท ููุงุณุจ ููู ูุฑูุถ.

โ๏ธ ูู ุญุงูุงุช ูุนููุฉ:
ุงูุฏูุงุก ุงููู ุจูุญููู ูู ุงูุฌูุทุงุช ูููู ูุฑูู ุงููููู ูู ุงุชุงุฎุฏ ุบูุท!

๐ ุฃุฏููุฉ ุชุญุชุงุฌ ูุชุงุจุนุฉ:
โข ACE inhibitors
โข ุจุนุถ ูุฏุฑุงุช ุงูุจูู

ุฏู ูุนูุงู ุจุชุณุงุนุฏ ุงูููู ูุชุญูููุงโฆ ููู ูู ุงุชุงุฎุฏุช ูู ุบูุฑ ูุชุงุจุนุฉ ูููู ุชุนูู:
โข ูุฎุจุทุฉ ูู ุงูุฃููุงุญ
โข ูุจูุท ูู ููุงุกุฉ ุงูููู
โข ุงุฑุชูุงุน ููุงุฌุฆ ูู ุงูุจูุชุงุณููู

โ ุงููุตูุญุฉ:
โข ูุชุบููุฑุด ุฌุฑุนุชู ููุญุฏู
โข ูุง ุชูููุด ุงูุนูุงุฌ ูุฌุฃุฉ
โข ูู ุถุบุทู ูุด ูุธุจูุท ุฑุงุฌุน ุงูุฏูุชูุฑ ููุฑุงู

โ๏ธ ูุน ุฏ. ููู - ูุนูู ุจุงูุฏูุงุก ูู ุฎุท ุงูุฏูุงุน ุงูุฃูู ๐`,

  "ุฃุฏููุฉ ุงูุจุฑุฏ": `๐ฌ ุฃุฏููุฉ ุงูุจุฑุฏ ูุงูููู:

ูุน ุฃูู ุนุทุณุฉ ุฃู ุตุฏุงุนุ ุฃุบูุจูุง ุจูุฌุฑู ุนูู ุงูุตูุฏููุฉ!
ููู ุฃุฏููุฉ ุงูุจุฑุฏ ูุด ุฏุงูููุง ุจุฑูุฆุฉ!

โ๏ธ ููููุงุช ุฎุทุฑุฉ ูู ุฃุฏููุฉ ุงูุจุฑุฏ:

1๏ธโฃ ุฏูููููููุงู (Diclofenac):
ุงููุณูู ุงููู ููุทุน ุงููุฌุน ุจุณุฑุนุฉโฆ ูููู ูููู ูููู ุถุฎ ุงูุฏู ููููู

2๏ธโฃ ุณูุฏูุงูุฏุฑูู (Pseudoephedrine):
ุงููู ุจููุชุญ ุงูุฌููุจ ุงูุฃูููุฉโฆ ููู ุจูุฑูุน ุงูุถุบุท

3๏ธโฃ ูุถุงุฏุงุช ุงูุญุณุงุณูุฉ:
ุจุนุถูุง ุจูููู ุงูุชุฑููุฉ ุงูุฏูููุฉ ููููู

โ๏ธ ุงูููุถูุน ูุจูู ุฃุฎุทุฑ ูู:
โข ุนูุฏู ุถุบุท ุฃู ููุจ
โข ุจุชุงุฎุฏ ูุฏุฑุงุช
โข ุนูุฏู ุงูุชูุงุจุงุช ููู ูุจู ูุฏู
โข ุจุชุงุฎุฏ ุฃูุชุฑ ูู ุฏูุงุก ูู ุงูููู

โ ุงููุตูุญุฉ:
ูุด ูู ุฏูุงุก ุจุฑุฏ ููุงุณุจ ููู ุญุฏ!
ูุงุฒู ุชุณุฃู ุงูุฏูุชูุฑ ุงูุฃูู ุฎุงุตุฉ ูู ูุฑูุถ ุถุบุท ุฃู ุณูุฑ ๐`,

  "ุงูุฅูุฑุงุท ูู ุงูุฃุฏููุฉ": `๐ฌ ุงูุฅูุฑุงุท ูู ุงูุฃุฏููุฉ = ุนุจุก ุฅุถุงูู ุนูู ุงูููู!

ูู ููู ูู ูุงุณ ุจุชุงุฎุฏ ุฃุฏููุฉ ูุชูุฑ:
โข ุฏูุงุก ููุถุบุท
โข ุฏูุงุก ููุณูุฑ
โข ุญุจุฉ ูููุนุฏุฉ
โข ูููู ุบุฐุงุฆู
โข ูุณูู ุนูู ุงูุณุฑูุน

โ๏ธ ูู ุฏูุงุก ุจูุชุญูู ูู ุงูุฌุณู ูุจูุนุฏูู ุนูู ุงูููู!

ููุง ุงูููู ุชูุงูู ููุณูุง ุจุชุชุนุงูู ูุน 4 ุฃู 5 ุฃุฏููุฉ ูู ููุช ูุงุญุฏ:
ุชุจุฏุฃ ุชุถุนู ุจูุฏูุกโฆ ูู ุบูุฑ ูุง ุชุจูู ุฃู ุนูุงูุฉ!

โ๏ธ ุงูุชูุงุนู ุจูู ุงูุฃุฏููุฉ ูููู:
โข ูุจููุธ ุชูุงุฒู ุงูุฌุณู
โข ูุฒูุฏ ุชุฃุซูุฑ ุจุนุถ ุงูุฃุฏููุฉ
โข ูููู ุฅุฎุฑุงุฌูุง ูู ุงูุฌุณู
โข ุชุชุนุจ ุงูููู ูู ุบูุฑ ูุง ุชุญุณ!

โ ุงููุงุนุฏุฉ ุงูุจุณูุทุฉ:
"ูู ุจุชุงุฎุฏ ุฃุฏููุฉ ูุชูุฑุฉ ุจุดูู ูุณุชูุฑุ ูุงุฒู ุฏูุชูุฑ ููู ูุฑุงุฌุนูู"

โ๏ธ ุงูููุงูุฉ ูุด ุดุนุงุฑ... ุฏู ุฃุณููุจ ุญูุงุฉ ๐`,

  "ุงูุฃุนุดุงุจ ูุงูููููุงุช": `๐ฌ ุงูุฃุนุดุงุจ ูุงูููููุงุช ุงูุทุจูุนูุฉ... ูู ูุนูุงู ุขููุฉ ุนูู ุงููููุ

ูุงุณ ูุชูุฑ ุจุชุตุฏู ุฅู "ุทุจูุนู = ุขูู"!
ููู ุงูููุงุฌุฃุฉ ุฅู ูู ุญุงุฌุงุช ุทุจูุนูุฉ ุจุชุจูู ุฃุฎุทุฑ ูู ุงูุฃุฏููุฉ ููุณูุง!

โ๏ธ ุงูููู ูู ุฃูุชุฑ ุงูุฃุนุถุงุก ุงููู ุจุชุชุฃุฐู ูู ุงูุฃุนุดุงุจ ุงูุนุดูุงุฆูุฉ!

โ ุญุงูุงุช ูุตูุช ููุนูุงุฏุงุช ุจุณุจุจ:
โข ุฎูุทุงุช "ุชูุญูู" ุฃู "ุชุจููุถ" ูุฌูููุฉ ุงููุตุฏุฑ
โข ููููุงุช ูููุงูุฉ ูุนุงุฏู ุชูููุฉ
โข ุฃุนุดุงุจ ุงุชุฌูุนุช ูู ุฃูุงูู ูููุซุฉ
โข ุฎูุทุงุช ุตูุงุนูุฉ ูุฎููุฉ

โ๏ธ ูููู ูุญุตู:
โข ุชูู ูุง ูููู ุฅุตูุงุญู ูู ุงูููู!

โ ุงูุฎูุงุตุฉ:
ูุด ูุนูู ุฅู ุงูููุชุฌ "ุทุจูุนู" ูุจูู "ุขูู"
ุงููุฑู ุจูู ุงููุงูุฏุฉ ูุงูุถุฑุฑ ุจูุญุฏุฏู:
โข ุงูุฌุฑุนุฉ
โข ููุน ุงููุงุฏุฉ
โข ุญุงูุฉ ุงูููู ููุณูุง

โ๏ธ ูู ุจุชุงุฎุฏ ุฃู ูููู ุฃู ุนุดุจุฉ ุจุงุณุชูุฑุงุฑุ ุงุณุชุดูุฑ ุฏูุชูุฑ ููู ูุจููุง ๐`,

  "ุงูุฐุฆุจุฉ ุงูุญูุฑุงุก": `๐ฌ ุงูุฐุฆุจุฉ ุงูุญูุฑุงุก ูุงูููู:

ุงูุฐุฆุจุฉ ุงูุญูุฑุงุก (Lupus) ูุฑุถ ููุงุนู ูููู ุฃู ูุคุซุฑ ุนูู ุงูููู.

โ๏ธ ููู ุชุคุซุฑ ุนูู ุงููููุ
โข ุงูุชูุงุจ ูุจูุจุงุช ุงูููู
โข ุจุฑูุชูู ูู ุงูุจูู
โข ุงุฑุชูุงุน ุถุบุท ุงูุฏู
โข ุชูุฑู ุงูุฌุณู

๐จ ุฃุนุฑุงุถ ุชุณุชุฏุนู ุงูุงูุชุจุงู:
โข ุชูุฑู ุงููุฌู ูุงููุฏููู
โข ุฑุบูุฉ ูู ุงูุจูู
โข ุงุฑุชูุงุน ุงูุถุบุท
โข ุฅุฑูุงู ุดุฏูุฏ

๐ ุงูุชุดุฎูุต ูุดูู:
โข ุชุญุงููู ุงูุฏู ูุงูุจูู
โข ุนููุฉ ูู ุงูููู
โข ูุญุต ุงูุฃุฌุณุงู ุงููุถุงุฏุฉ

โ ุงูุนูุงุฌ:
โข ุฃุฏููุฉ ูุซุจุทุฉ ููููุงุนุฉ
โข ุงูููุฑุชูุฒูู
โข ุฃุฏููุฉ ููุถุบุท
โข ูุชุงุจุนุฉ ุฏูุฑูุฉ

โ๏ธ ุฏ. ููู ูุชุฎุตุตุฉ ูู ุนูุงุฌ ุฃูุฑุงุถ ุงูููุงุนุฉ ุงููุชุนููุฉ ุจุงูููู`,

  "ุงูุบุณูู ุงููููู": `๐ฌ ุงูุบุณูู ุงููููู (Dialysis):

ูู ุนูุงุฌ ุจุฏูู ููุธุงุฆู ุงูููู ุนูุฏูุง ุชููุฏ ูุฏุฑุชูุง ุนูู ุงูุนูู.

๐ ุฃููุงุน ุงูุบุณูู:

1๏ธโฃ ุงูุบุณูู ุงูุฏููู (Hemodialysis):
โข ูุชู ูู ุงููุณุชุดูู ุฃู ูุฑูุฒ ูุชุฎุตุต
โข 3-4 ูุฑุงุช ุฃุณุจูุนูุงู
โข ูู ุฌูุณุฉ 4 ุณุงุนุงุช ุชูุฑูุจุงู

2๏ธโฃ ุงูุบุณูู ุงูุจุฑูุชููู:
โข ูุชู ูู ุงูููุฒู
โข ุนุจุฑ ุงูุบุดุงุก ุงูุจุฑูุชููู (ุงูุจุทู)
โข ุฃูุซุฑ ูุฑููุฉ ูู ุงูุฌุฏูู

โ๏ธ ูุชู ูุญุชุงุฌ ุงููุฑูุถ ููุบุณููุ
โข ูุนุฏู ุงูุชุฑุดูุญ ุฃูู ูู 15%
โข ุฃุนุฑุงุถ ุงูุชุณูู ุงูุจููู

โ ุฏ. ููู ุชูุฏู:
โข ุชุฑููุจ ุงููุณุทุฑุฉ ุงููุฑูุฏูุฉ
โข ูุชุงุจุนุฉ ูุฑุถู ุงูุบุณูู

๐ ููุงุณุชุดุงุฑุฉ: 01029665927`,

  "ุฒุฑุงุนุฉ ุงูููู": `๐ฌ ุฒุฑุงุนุฉ ุงูููู:

ูู ุงูุญู ุงูุฃูุซู ูููุดู ุงููููู ุงููุฒูู.

๐ ูููุฒุงุช ุงูุฒุฑุงุนุฉ:
โข ุญูุงุฉ ุฃูุถู ุจุฏูู ุบุณูู
โข ุญุฑูุฉ ุฃูุจุฑ ูู ุงูุฃูู ูุงูุดุฑุจ
โข ุงุณุชุนุงุฏุฉ ุงููุดุงุท ุงูุทุจูุนู

โ๏ธ ุดุฑูุท ุงูุฒุฑุงุนุฉ:
โข ุชูุงูู ูุตููุฉ ุงูุฏู
โข ุชูุงูู ุงูุฃูุณุฌุฉ
โข ุตุญุฉ ุงููุชุจุฑุน

๐ ุจุนุฏ ุงูุฒุฑุงุนุฉ:
โข ุฃุฏููุฉ ูุซุจุทุฉ ููููุงุนุฉ
โข ูุชุงุจุนุฉ ุฏูุฑูุฉ ูุณุชูุฑุฉ
โข ูุญูุตุงุช ููุชุธูุฉ

โ ุฏ. ููู ูุชุฎุตุตุฉ ูู:
โข ุชูููู ุงููุฑุถู ููุฒุฑุงุนุฉ
โข ูุชุงุจุนุฉ ูุง ุจุนุฏ ุงูุฒุฑุงุนุฉ
โข ุนูุงุฌ ูุถุงุนูุงุช ุงูุฒุฑุงุนุฉ

โ๏ธ ููุงุณุชุดุงุฑุฉุ ุฒูุฑู ุงูุนูุงุฏุฉ`,

  "ุงููุดู ุงููููู": `๐ฌ ุงููุดู ุงููููู:

ูู ููุฏุงู ุงูููู ููุฏุฑุชูุง ุนูู ุฃุฏุงุก ูุธุงุฆููุง.

๐ ุฃููุงุนู:
1๏ธโฃ ุญุงุฏ: ููุงุฌุฆ ููุงุจู ููุนูุงุฌ
2๏ธโฃ ูุฒูู: ุชุฏุฑูุฌู ููุญุชุงุฌ ูุชุงุจุนุฉ

โ๏ธ ุงูุฃุณุจุงุจ ุงูุดุงุฆุนุฉ:
โข ุงูุณูุฑู (ุงูุณุจุจ ุงูุฃูู)
โข ุงุฑุชูุงุน ุถุบุท ุงูุฏู
โข ุงูุชูุงุจุงุช ุงูููู ุงููุชูุฑุฑุฉ
โข ุญุตูุงุช ุงูููู
โข ุฃูุฑุงุถ ุงูููุงุนุฉ

๐จ ุฃุนุฑุงุถ ุงููุดู ุงููููู:
โข ุชูุฑู ุงููุฏููู ูุงููุฌู
โข ุฅุฑูุงู ุดุฏูุฏ
โข ููุฉ ุงูุจูู ุฃู ุชุบูุฑ ูููู
โข ุบุซูุงู ูููุฏุงู ุดููุฉ
โข ุญูุฉ ูู ุงูุฌูุฏ

โ ูุฑุงุญู ุงูุนูุงุฌ:
โข ุฃุฏููุฉ ูุชุบููุฑ ููุท ุงูุญูุงุฉ
โข ุงูุบุณูู ุงููููู
โข ุฒุฑุงุนุฉ ุงูููู

โ๏ธ ุฏ. ููู ูุชุฎุตุตุฉ ูู ุนูุงุฌ ูู ูุฑุงุญู ุงููุดู ุงููููู`,

  "ุงูุณูุฑ ูุงูููู": `๐ฌ ุงูุณูุฑู ูุชุฃุซูุฑู ุนูู ุงูููู:

ุงูุณูุฑู ูู ุงูุณุจุจ ุงูุฃูู ูููุดู ุงููููู ูู ุงูุนุงูู!

โ๏ธ ููู ูุคุซุฑ ุงูุณูุฑ ุนูู ุงููููุ
โข ูุฏูุฑ ุงูุฃูุนูุฉ ุงูุฏูููุฉ ุงูุฏูููุฉ
โข ูุณุจุจ ุชุณุฑุจ ุงูุจุฑูุชูู
โข ูุคุฏู ูุถููุฑ ุงูููู ุชุฏุฑูุฌูุงู

๐จ ูุฑุงุญู ุงุนุชูุงู ุงูููู ุงูุณูุฑู:
1. ุฒูุงุฏุฉ ุทูููุฉ ูู ุงูุจุฑูุชูู
2. ุจุฑูุชูู ูุงุถุญ ูู ุงูุจูู
3. ุงุฑุชูุงุน ุงููุฑูุงุชูููู
4. ูุดู ูููู

๐ ููุญูุงูุฉ:
โข ุงูุชุญูู ูู ุงูุณูุฑ (HbA1c < 7%)
โข ุถุบุท ุงูุฏู ุฃูู ูู 130/80
โข ูุญุต ุฏูุฑู ููุจูู ูุงููุฑูุงุชูููู

โ ุฃุฏููุฉ ุชุญูู ุงูููู:
โข ACE inhibitors
โข ARBs
โข SGLT2 inhibitors

โ๏ธ ูููุชุงุจุนุฉุ ุชูุงุตูู ูุน ุฏ. ููู`,
};

const keywords: Record<string, string> = {
  // ุฎุฏูุงุช
  "ุฎุฏู": "ูุง ูู ุฎุฏูุงุช ุงูุนูุงุฏุฉ",
  "ุนูุงุฌ": "ูุง ูู ุฎุฏูุงุช ุงูุนูุงุฏุฉ",
  "ุชุฎุตุต": "ูุง ูู ุฎุฏูุงุช ุงูุนูุงุฏุฉ",
  
  // ุนูุงููู
  "ุนููุงู": "ุฃูู ุงูุนูุงููู",
  "ููุงู": "ุฃูู ุงูุนูุงููู",
  "ููู": "ุฃูู ุงูุนูุงููู",
  "ุงุณููุท": "ุฃูู ุงูุนูุงููู",
  "ูููู": "ุฃูู ุงูุนูุงููู",
  "ุนูุงุฏ": "ุฃูู ุงูุนูุงููู",
  
  // ุญุฌุฒ
  "ุญุฌุฒ": "ููู ุฃุญุฌุฒ ููุนุฏ",
  "ููุนุฏ": "ููู ุฃุญุฌุฒ ููุนุฏ",
  "ููุนุงุฏ": "ููู ุฃุญุฌุฒ ููุนุฏ",
  "ูุดู": "ููู ุฃุญุฌุฒ ููุนุฏ",
  
  // ููุงุนูุฏ
  "ููุงุนูุฏ": "ูุง ูู ููุงุนูุฏ ุงูุนูู",
  "ููุช": "ูุง ูู ููุงุนูุฏ ุงูุนูู",
  "ูุชู": "ูุง ูู ููุงุนูุฏ ุงูุนูู",
  "ุณุงุนุฉ": "ูุง ูู ููุงุนูุฏ ุงูุนูู",
  
  // ูุตุงุฆุญ
  "ูุตุงุฆุญ": "ูุตุงุฆุญ ูุตุญุฉ ุงูููู",
  "ูุตูุญ": "ูุตุงุฆุญ ูุตุญุฉ ุงูููู",
  "ุตุญุฉ": "ูุตุงุฆุญ ูุตุญุฉ ุงูููู",
  "ุญุงูุธ": "ูุตุงุฆุญ ูุตุญุฉ ุงูููู",
  "ููู": "ูุตุงุฆุญ ูุตุญุฉ ุงูููู",
  "ููุฉ": "ูุตุงุฆุญ ูุตุญุฉ ุงูููู",
  "ุดุชุง": "ูุตุงุฆุญ ูุตุญุฉ ุงูููู",
  
  // ุชุญุงููู
  "ูุฑูุงุชูู": "ูุง ูู ุงููุฑูุงุชูููู",
  "creatinine": "ูุง ูู ุงููุฑูุงุชูููู",
  "ููุฑูุง": "ุชุญุงููู ูุธุงุฆู ุงูููู",
  "urea": "ุชุญุงููู ูุธุงุฆู ุงูููู",
  "bun": "ุชุญุงููู ูุธุงุฆู ุงูููู",
  "ุชุญุงููู": "ุชุญุงููู ูุธุงุฆู ุงูููู",
  "ุชุญููู": "ุชุญุงููู ูุธุงุฆู ุงูููู",
  "ูุธุงุฆู": "ุชุญุงููู ูุธุงุฆู ุงูููู",
  "egfr": "ุชุญุงููู ูุธุงุฆู ุงูููู",
  "gfr": "ุชุญุงููู ูุธุงุฆู ุงูููู",
  "ุชุฑุดูุญ": "ุชุญุงููู ูุธุงุฆู ุงูููู",
  
  // ุญุตูุงุช
  "ุญุตู": "ุญุตูุงุช ุงูููู",
  "ุญุตู": "ุญุตูุงุช ุงูููู",
  "stone": "ุญุตูุงุช ุงูููู",
  "ุนูููุฉ ุงูุญุตูุงุช": "ุญุตูุงุช ุงูููู",
  
  // ุญูู
  "ุญูู": "ุงูููู ูุงูุญูู",
  "ุญุงูู": "ุงูููู ูุงูุญูู",
  "ุฌููู": "ุงูููู ูุงูุญูู",
  
  // ูุณููุงุช
  "ูุณูู": "ุงููุณููุงุช ูุงูููู",
  "ุจุฑูููู": "ุงููุณููุงุช ูุงูููู",
  "ูููุชุงุฑูู": "ุงููุณููุงุช ูุงูููู",
  "ุจุงูู ูููุฑ": "ุงููุณููุงุช ูุงูููู",
  "ูุฌุน": "ุงููุณููุงุช ูุงูููู",
  
  // ุฃุฏููุฉ ุงูุถุบุท
  "ุงุฏููุฉ ุงูุถุบุท": "ุฃุฏููุฉ ุงูุถุบุท",
  "ุฃุฏููุฉ ุงูุถุบุท": "ุฃุฏููุฉ ุงูุถุบุท",
  "ุนูุงุฌ ุงูุถุบุท": "ุฃุฏููุฉ ุงูุถุบุท",
  
  // ุฃุฏููุฉ ุงูุจุฑุฏ
  "ุจุฑุฏ": "ุฃุฏููุฉ ุงูุจุฑุฏ",
  "ูุญุฉ": "ุฃุฏููุฉ ุงูุจุฑุฏ",
  "ุงูููููุฒุง": "ุฃุฏููุฉ ุงูุจุฑุฏ",
  "ุนุทุณ": "ุฃุฏููุฉ ุงูุจุฑุฏ",
  
  // ุฃุฏููุฉ ูุชูุฑุฉ
  "ุงุฏููุฉ ูุชูุฑ": "ุงูุฅูุฑุงุท ูู ุงูุฃุฏููุฉ",
  "ุฃุฏููุฉ ูุชูุฑ": "ุงูุฅูุฑุงุท ูู ุงูุฃุฏููุฉ",
  
  // ุฃุนุดุงุจ
  "ุฃุนุดุงุจ": "ุงูุฃุนุดุงุจ ูุงูููููุงุช",
  "ุงุนุดุงุจ": "ุงูุฃุนุดุงุจ ูุงูููููุงุช",
  "ูููู": "ุงูุฃุนุดุงุจ ูุงูููููุงุช",
  "ุทุจูุนู": "ุงูุฃุนุดุงุจ ูุงูููููุงุช",
  "ุชูุญูู": "ุงูุฃุนุดุงุจ ูุงูููููุงุช",
  
  // ุบุณูู
  "ุบุณูู": "ุงูุบุณูู ุงููููู",
  "dialysis": "ุงูุบุณูู ุงููููู",
  "ุฏููุฒู": "ุงูุบุณูู ุงููููู",
  
  // ุฒุฑุงุนุฉ
  "ุฒุฑุงุน": "ุฒุฑุงุนุฉ ุงูููู",
  "transplant": "ุฒุฑุงุนุฉ ุงูููู",
  "ูุชุจุฑุน": "ุฒุฑุงุนุฉ ุงูููู",
  
  // ูุดู ูููู
  "ูุดู": "ุงููุดู ุงููููู",
  "ูุตูุฑ": "ุงููุดู ุงููููู",
  
  // ุฃูุฑุงุถ ููุงุนุฉ
  "ุฐุฆุจุฉ": "ุงูุฐุฆุจุฉ ุงูุญูุฑุงุก",
  "lupus": "ุงูุฐุฆุจุฉ ุงูุญูุฑุงุก",
  "ููุงุน": "ุงูุฐุฆุจุฉ ุงูุญูุฑุงุก",
  "ุฑููุงุชููุฏ": "ุงูุฐุฆุจุฉ ุงูุญูุฑุงุก",
  
  // ุถุบุท
  "ุถุบุท": "ุฃุฏููุฉ ุงูุถุบุท",
  "pressure": "ุฃุฏููุฉ ุงูุถุบุท",
  
  // ุณูุฑ
  "ุณูุฑ": "ุงูุณูุฑ ูุงูููู",
  "ุณูุฑู": "ุงูุณูุฑ ูุงูููู",
  "diabetes": "ุงูุณูุฑ ูุงูููู",
  
  // ุจุฑูุชูู
  "ุจุฑูุชูู": "ุชุญุงููู ูุธุงุฆู ุงูููู",
  "ุฑุบูุฉ": "ุชุญุงููู ูุธุงุฆู ุงูููู",
  "ุฒูุงู": "ุชุญุงููู ูุธุงุฆู ุงูููู",
  
  // ุฃุนุฑุงุถ ุนุงูุฉ
  "ุชูุฑู": "ุงููุดู ุงููููู",
  "ูุฑู": "ุงููุดู ุงููููู",
  "ุงูุชูุงุฎ": "ุงููุดู ุงููููู",
};

const ChatBot = () => {
  const [isOpen, setIsOpen] = useState(false);
  const [quickReplies, setQuickReplies] = useState(getRandomQuickReplies());
  const [messages, setMessages] = useState<Message[]>([
    {
      id: 1,
      text: "ุฃููุงู ุจู! ๐ ุฃูุง ุงููุณุงุนุฏ ุงูุฐูู ูุนูุงุฏุฉ ุฏ. ููู ุฌูุงู.\n\nูููููู ูุณุงุนุฏุชู ูู:\nโข ูุนุฑูุฉ ุฎุฏูุงุช ุงูุนูุงุฏุฉ\nโข ุงูุนูุงููู ูุงูุญุฌุฒ\nโข ุชูุณูุฑ ุงูุชุญุงููู\nโข ูุตุงุฆุญ ุตุญุฉ ุงูููู\n\nููู ูููููู ูุณุงุนุฏุชูุ",
      isBot: true,
      timestamp: new Date(),
    },
  ]);
  const [inputValue, setInputValue] = useState("");
  const messagesEndRef = useRef<HTMLDivElement>(null);

  const scrollToBottom = () => {
    messagesEndRef.current?.scrollIntoView({ behavior: "smooth" });
  };

  useEffect(() => {
    scrollToBottom();
  }, [messages]);

  const handleButtonClick = (button: { label: string; url?: string; action?: string }) => {
    if (button.url) {
      window.open(button.url, "_blank");
    } else if (button.action === "booking") {
      const bookingSection = document.getElementById("booking");
      if (bookingSection) {
        setIsOpen(false);
        bookingSection.scrollIntoView({ behavior: "smooth" });
      }
    }
  };

  const getBotResponse = (userMessage: string): { text: string; buttons?: { label: string; url?: string; action?: string }[] } => {
    const lowerMessage = userMessage.toLowerCase().trim();
    const normalizedMessage = lowerMessage
      .replace(/[ุ?!.,ุ]/g, "")
      .replace(/\s+/g, " ")
      .trim();
    
    // Check for greetings first
    for (const [greeting, response] of Object.entries(greetings)) {
      if (normalizedMessage.includes(greeting.toLowerCase())) {
        return { text: response };
      }
    }
    
    // Check for site-related questions
    for (const [question, response] of Object.entries(siteQuestions)) {
      if (normalizedMessage.includes(question.toLowerCase())) {
        return response;
      }
    }
    
    // Check for who made the website
    if (normalizedMessage.includes("ุนูู ุงููููุน") || normalizedMessage.includes("ุตูู ุงููููุน") || normalizedMessage.includes("ููู ุนูู") || normalizedMessage.includes("good graphic")) {
      return siteQuestions["ููู ุนูู ุงููููุน"];
    }
    
    // Check for doctor questions
    if (normalizedMessage.includes("ููู ุงูุฏูุชูุฑ") || normalizedMessage.includes("ุนู ุงูุฏูุชูุฑ") || normalizedMessage.includes("ุงูุฏูุชูุฑู") || normalizedMessage.includes("ุงูุนูุงุฏู") || normalizedMessage.includes("ุงูุนูุงุฏุฉ")) {
      return siteQuestions["ูููุน ููู"];
    }
    
    // Check for Facebook specifically
    if (normalizedMessage.includes("ููุณ") || normalizedMessage.includes("ููุณุจูู") || normalizedMessage.includes("facebook") || normalizedMessage.includes("ุงูุตูุญ")) {
      return {
        text: `๐ฑ ุชุงุจุนููุง ุนูู ุตูุญุฉ ุฏ. ููู ุฌูุงู ุงูุฑุณููุฉ ุนูู ููุณุจูู!

ุณุชุฌุฏ ุนูู ุงูุตูุญุฉ:
โข ููุดูุฑุงุช ุทุจูุฉ ุชูุนููุฉ
โข ูุตุงุฆุญ ููุญูุงุธ ุนูู ุตุญุฉ ุงูููู
โข ุขุฎุฑ ุงูุฃุฎุจุงุฑ ูุงูููุงุนูุฏ ๐`,
        buttons: [
          { label: "๐ ุฒูุงุฑุฉ ุตูุญุฉ ุงูููุณุจูู", url: "https://www.facebook.com/share/1AyG9DQ8Kw/" },
        ],
      };
    }
    
    // Check for booking requests
    if (normalizedMessage.includes("ุญุฌุฒ") || normalizedMessage.includes("ุงุญุฌุฒ") || normalizedMessage.includes("ููุนุฏ") || normalizedMessage.includes("ููุนุงุฏ")) {
      return {
        text: `ููููู ุญุฌุฒ ููุนุฏู ุจุณูููุฉ! ๐`,
        buttons: [
          { label: "๐ ุงุญุฌุฒ ููุนุฏู ุงูุขู", action: "booking" },
          { label: "๐ ุงุชุตู: 01029665927", url: "tel:01029665927" },
        ],
      };
    }
    
    // Check for direct match in botResponses
    for (const [key, response] of Object.entries(botResponses)) {
      if (normalizedMessage.includes(key.toLowerCase())) {
        return { text: response };
      }
    }
    
    // Check keywords
    for (const [keyword, responseKey] of Object.entries(keywords)) {
      if (normalizedMessage.includes(keyword.toLowerCase())) {
        const response = botResponses[responseKey];
        if (response) {
          return { text: response };
        }
      }
    }
    
    // Check for numbers (possible lab results)
    const numberMatch = lowerMessage.match(/\d+\.?\d*/);
    if (numberMatch) {
      const value = parseFloat(numberMatch[0]);
      if (lowerMessage.includes("ูุฑูุงุชูู") || lowerMessage.includes("creatinine")) {
        if (value > 1.3) {
          return {
            text: `๐ ูุฑุงุกุฉ ุงููุฑูุงุชูููู: ${value} mg/dL

โ๏ธ ูุฐู ุงููุฑุงุกุฉ ุฃุนูู ูู ุงูุทุจูุนู (0.6-1.3)

ูุฏ ูุดูุฑ ุฐูู ุฅูู:
โข ุถุนู ูู ูุธุงุฆู ุงูููู
โข ุฌูุงู
โข ููุงุฑุณุฉ ุฑูุงุถุฉ ุดุฏูุฏุฉ

โ ููุตุญ ุจู:
โข ุดุฑุจ ูุงุก ูุงูู
โข ุฅุนุงุฏุฉ ุงูุชุญููู
โข ุฒูุงุฑุฉ ุทุจูุจ ุงูููู

โ๏ธ ููุงุทูุฆูุงูุ ุงุญุฌุฒู ููุนุฏ ูุน ุฏ. ููู`,
            buttons: [
              { label: "๐ ุงุญุฌุฒ ููุนุฏ", action: "booking" },
            ],
          };
        } else {
          return {
            text: `๐ ูุฑุงุกุฉ ุงููุฑูุงุชูููู: ${value} mg/dL

โ ูุฐู ุงููุฑุงุกุฉ ูู ุงููุนุฏู ุงูุทุจูุนู (0.6-1.3)

๐ก ููุญูุงุธ ุนูู ุตุญุฉ ุงูููู:
โข ุดุฑุจ 8-10 ุฃููุงุจ ูุงุก ููููุงู
โข ุชูููู ุงูููุญ
โข ูุชุงุจุนุฉ ุงูุถุบุท ูุงูุณูุฑ

โ๏ธ ูููุฒูุฏ ูู ุงูุงุทูุฆูุงูุ ููููู ุฒูุงุฑุฉ ุฏ. ููู`,
          };
        }
      }
    }
    
    // Default response with buttons
    return {
      text: `ุดูุฑุงู ูุชูุงุตูู ูุนูุง! ๐

ูู ุฃุฌุฏ ุฅุฌุงุจุฉ ูุญุฏุฏุฉ ูุณุคุงููุ ููู ููููู:`,
      buttons: [
        { label: "๐ ุตูุญุฉ ุงูููุณุจูู", url: "https://www.facebook.com/share/1AyG9DQ8Kw/" },
        { label: "๐ ุงุชุตู ุจุงูุนูุงุฏุฉ", url: "tel:01029665927" },
        { label: "๐ ุงุญุฌุฒ ููุนุฏ", action: "booking" },
      ],
    };
  };

  const handleSend = (text: string = inputValue) => {
    if (!text.trim()) return;

    const userMessage: Message = {
      id: Date.now(),
      text: text,
      isBot: false,
      timestamp: new Date(),
    };

    setMessages((prev) => [...prev, userMessage]);
    setInputValue("");

    setTimeout(() => {
      const response = getBotResponse(text);
      const botMessage: Message = {
        id: Date.now() + 1,
        text: response.text,
        isBot: true,
        timestamp: new Date(),
        buttons: response.buttons,
      };
      setMessages((prev) => [...prev, botMessage]);
    }, 800);
  };

  const handleQuickReply = (reply: string) => {
    handleSend(reply);
    // Refresh quick replies after each use
    setTimeout(() => setQuickReplies(getRandomQuickReplies()), 100);
  };

  return (
    <>
      {/* Chat Button */}
      <button
        onClick={() => setIsOpen(true)}
        className={`fixed bottom-6 left-6 z-50 w-16 h-16 rounded-full bg-gradient-to-r from-primary to-accent text-primary-foreground shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-110 flex items-center justify-center ${
          isOpen ? "hidden" : "animate-bounce"
        }`}
        style={{ animationDuration: "2s" }}
      >
        <MessageCircle className="w-7 h-7" />
        <span className="absolute -top-1 -right-1 w-4 h-4 bg-accent rounded-full animate-ping" />
      </button>

      {/* Chat Window */}
      {isOpen && (
        <div className="fixed bottom-6 left-6 z-50 w-[380px] max-w-[calc(100vw-48px)] h-[550px] max-h-[calc(100vh-100px)] bg-card rounded-3xl shadow-2xl border border-border/50 flex flex-col overflow-hidden animate-scale-in">
          {/* Header */}
          <div className="gradient-hero p-4 flex items-center justify-between">
            <div className="flex items-center gap-3">
              <div className="w-10 h-10 rounded-full bg-primary-foreground/20 flex items-center justify-center">
                <Bot className="w-5 h-5 text-primary-foreground" />
              </div>
              <div className="text-primary-foreground">
                <p className="font-semibold">ุงููุณุงุนุฏ ุงูุฐูู</p>
                <p className="text-xs opacity-80">ูุชุงุญ ูููุณุงุนุฏุฉ 24/7</p>
              </div>
            </div>
            <button
              onClick={() => setIsOpen(false)}
              className="w-8 h-8 rounded-full bg-primary-foreground/20 flex items-center justify-center hover:bg-primary-foreground/30 transition-colors"
            >
              <X className="w-4 h-4 text-primary-foreground" />
            </button>
          </div>

          {/* Messages */}
          <div className="flex-1 overflow-y-auto p-4 space-y-4">
            {messages.map((message) => (
              <div
                key={message.id}
                className={`flex gap-2 ${message.isBot ? "flex-row" : "flex-row-reverse"} animate-fade-up`}
              >
                <div
                  className={`w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0 ${
                    message.isBot ? "bg-primary/10" : "bg-accent/10"
                  }`}
                >
                  {message.isBot ? (
                    <Bot className="w-4 h-4 text-primary" />
                  ) : (
                    <User className="w-4 h-4 text-accent" />
                  )}
                </div>
                <div className="max-w-[80%]">
                  <div
                    className={`p-3 rounded-2xl ${
                      message.isBot
                        ? "bg-secondary text-secondary-foreground rounded-tr-sm"
                        : "bg-primary text-primary-foreground rounded-tl-sm"
                    }`}
                  >
                    <p className="text-sm whitespace-pre-line">{message.text}</p>
                  </div>
                  {/* Action Buttons */}
                  {message.buttons && message.buttons.length > 0 && (
                    <div className="flex flex-wrap gap-2 mt-2">
                      {message.buttons.map((button, idx) => (
                        <button
                          key={idx}
                          onClick={() => handleButtonClick(button)}
                          className="flex items-center gap-1.5 px-3 py-2 bg-primary/10 hover:bg-primary/20 text-primary text-xs font-medium rounded-xl transition-colors"
                        >
                          {button.label.includes("ููุณุจูู") && <Facebook className="w-3.5 h-3.5" />}
                          {button.label.includes("ุงุชุตู") && <Phone className="w-3.5 h-3.5" />}
                          {button.label.includes("ุงุญุฌุฒ") && <Calendar className="w-3.5 h-3.5" />}
                          {button.label}
                        </button>
                      ))}
                    </div>
                  )}
                </div>
              </div>
            ))}
            <div ref={messagesEndRef} />
          </div>

          {/* Quick Replies */}
          <div className="px-4 pb-2">
            <div className="flex flex-wrap gap-2">
              {quickReplies.map((reply, index) => (
                <button
                  key={index}
                  onClick={() => handleQuickReply(reply)}
                  className="px-3 py-1.5 bg-secondary text-secondary-foreground text-xs rounded-full hover:bg-primary/10 hover:text-primary transition-colors"
                >
                  {reply}
                </button>
              ))}
            </div>
          </div>

          {/* Input */}
          <div className="p-4 border-t border-border">
            <form
              onSubmit={(e) => {
                e.preventDefault();
                handleSend();
              }}
              className="flex gap-2"
            >
              <Input
                value={inputValue}
                onChange={(e) => setInputValue(e.target.value)}
                placeholder="ุงูุชุจ ุณุคุงูู..."
                className="flex-1 rounded-xl border-border/50 h-11 text-right"
              />
              <Button
                type="submit"
                size="icon"
                className="w-11 h-11 rounded-xl bg-primary hover:bg-primary-dark"
              >
                <Send className="w-4 h-4" />
              </Button>
            </form>
          </div>
        </div>
      )}
    </>
  );
};

export default ChatBot;